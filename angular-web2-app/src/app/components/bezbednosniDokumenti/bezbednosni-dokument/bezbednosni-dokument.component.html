<div class="container" style="margin-top: 100px;">
  <div class="row w-80">
    <div class="col-4">
      <input type="button" class="btn btn-primary" data-toggle="modal" data-target="#dodajModal" value="Dodaj bezbednosni dokument">
    </div>
    <div class="col-4">
      <h1>{{ naslov }}</h1>
    </div>
    <div class="col-4">
      <input class="form-control" (keyup)="applyFilter($event.target)" placeholder="Filter">
    </div>
  </div>
  <div class="row w-80 text-center">
      <table mat-table matSort aria-label="Elements" class="table table-bordered table-hover">
        <!-- Id Column -->
        <ng-container matColumnDef="idBezbednosnogDokumenta">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Id bezbednosnog dokumenta</p></th>
          <td mat-cell *matCellDef="let row">{{row.idBezbednosnogDokumenta | number}}</td>
        </ng-container>
    
        <!-- Tip Column -->
        <ng-container matColumnDef="Tip">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Tip</p></th>
          <td mat-cell *matCellDef="let row">{{row.Tip}}</td>
        </ng-container>
    
        <!-- Status Column -->
        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Status</p></th>
          <td mat-cell *matCellDef="let row">{{row.Status}}</td>
        </ng-container>
    
        <!-- Ekipa Column -->
        <ng-container matColumnDef="Ekipa">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Ekipa</p></th>
          <td mat-cell *matCellDef="let row">{{row.Ekipa}}</td>
        </ng-container>
    
        <!-- Detalji Column -->
        <ng-container matColumnDef="Detalji">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Detalji</p></th>
          <td mat-cell *matCellDef="let row">{{row.Detalji}}</td>
        </ng-container>
    
        <!-- Beleske Column -->
        <ng-container matColumnDef="Beleske">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Beleske</p></th>
          <td mat-cell *matCellDef="let row">{{row.Beleske}}</td>
        </ng-container>
    
        <!-- TelefonskiBroj Column -->
        <ng-container matColumnDef="TelefonskiBroj">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Telefonski broj</p></th>
          <td mat-cell *matCellDef="let row">{{row.TelefonskiBroj}}</td>
        </ng-container>
    
        <!-- DatumKreiranja Column -->
        <ng-container matColumnDef="DatumKreiranja">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Datum kreiranja</p></th>
          <td mat-cell *matCellDef="let row">{{row.DatumKreiranja | date}}</td>
        </ng-container>
    
          <!-- AllWorkOperationsCompleted Column  -->
        <ng-container matColumnDef="AllWorkOperationsCompleted">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>All work operations completed</p></th>
          <td mat-cell *matCellDef="let row">{{row.AllWorkOperationsCompleted}}</td>
        </ng-container>
    
          <!-- AllTagsRemoved Column  -->
        <ng-container matColumnDef="AllTagsRemoved">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>All tags removed</p></th>
          <td mat-cell *matCellDef="let row">{{row.AllTagsRemoved}}</td>
        </ng-container>
    
          <!-- GroundingRemoved Column  -->
        <ng-container matColumnDef="GroundingRemoved">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Grounding removed</p></th>
          <td mat-cell *matCellDef="let row">{{row.GroundingRemoved}}</td>
        </ng-container>
    
          <!-- ReadyForService Column  -->
        <ng-container matColumnDef="ReadyForService">
          <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Ready for service</p></th>
          <td mat-cell *matCellDef="let row">{{row.ReadyForService}}</td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="Action">
          <th mat-header-cell  *matHeaderCellDef > Action </th>
          <td mat-cell *matCellDef="let row">
            <button mat-button class="btn btn-primary m-1" (click)="prikazi(row.idBezbednosnogDokumenta)">Prikazi</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      
      <mat-paginator #paginator
          [length]="dataSource?.data?.length"
          [pageIndex]="0"
          [pageSize]="10"
          [pageSizeOptions]="[5, 10, 20]">
      </mat-paginator>
  </div>
  <div class="row" [hidden]="idBezbednosnogDokumenta == -1">
    <div class="col-6">
      <h1>Tabela opreme za bezbednosni dokument: {{ idBezbednosnogDokumenta }}</h1>
      <table class="table table-striped table-bordered table-sm">
          <thead>
              <th>IdOpreme</th>
              <th>Naziv</th>
              <th>Tip</th>
              <th>Kordinate</th>
              <th>Adresa</th>
              <th>Ukloni</th>
              <th>Lokacija</th>
          </thead>
          <tbody>
              <tr *ngFor="let item of Oprema">
                  <td>{{ item.idOpreme }}</td>
                  <td>{{ item.Naziv }}</td>
                  <td>{{ item.Tip }}</td>
                  <td>{{ item.Kordinate}}</td>
                  <td>{{ item.Adresa}}</td>
                  <td>
                      <input class="btn btn-primary" type="button" (click)="removeOprema(item.idOpreme)" value="Ukloni">
                  </td>
                  <td>
                      <button class="btn btn-primary-outline w-100" >
                          <i class="bi bi-pin-map"></i>
                      </button>
                  </td>
              </tr>
          </tbody>
      </table>
    </div>
    <div class="col-6">
      <h1>Tabela slika za bezbednosni dokument: {{ idBezbednosnogDokumenta }}</h1>
      <table class="table table-striped table-bordered-table-sm">
        <thead>
          <th>IdSlike</th>
          <th>Putanja</th>
          <th>Prebaci</th>
          <th>Ukloni</th>
        </thead>
        <tbody>
          <tr *ngFor="let slika of Slike">
            <td>{{ slika.idSlike }}</td>
            <td>{{ slika.Putanja }}</td>
            <td>
              <input class="form-control" type="number" [(ngModel)]="idPrebaci">
              <input class="btn btn-primary" type="button" (click)="prebaciSliku(slika.idSlike)" value="Prebaci">
            </td>
            <td>
              <input class="btn btn-primary" type="button" (click)="removeSlika(slika.idSlike)" value="Ukloni">
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="text-center">
      <app-bezbednosni-dokument-log [idKorisnika]="idKorisnika"></app-bezbednosni-dokument-log>
    </div>
  </div>

  <div class="modal fade" id="dodajModal" tabindex="-1" role="dialog" aria-labelledby="dodajModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title">Dodaj bezbednosni dokument</h1>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
            </div>
            <div class="modal-body">
              <app-bezbednosni-dokument-dodavanje (messageEvent)="reciveMessage($event)"></app-bezbednosni-dokument-dodavanje>
            </div>
        </div>
    </div>
  </div>
</div>
