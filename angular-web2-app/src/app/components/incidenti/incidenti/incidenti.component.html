<div class="container" style="margin-top: 100px;">
  <div class="row w-80">
    <div class="col-4">
      <input type="button" class="btn btn-danger" value="Prijavi incident" routerLink="/dodaj-incident">
    </div>
    <div class="col-4">
      <h1>{{ naslov }}</h1>
    </div>
    <div class="col-4">
      <input class="form-control" (keyup)="applyFilter($event.target)" placeholder="Filter">
    </div>
  </div>
  <div class="row w-80 text-center">
    <table mat-table matSort aria-label="Elements" class="table table-bordered table-hover">
      <!-- Id Column -->
      <ng-container matColumnDef="idIncidenta" sticky>
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Id incidenta</p></th>
        <td mat-cell *matCellDef="let row">{{row.idIncidenta | number}}</td>
      </ng-container>
  
      <!-- Tip Column -->
      <ng-container matColumnDef="NazivTipIncidenta" sticky>
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Tip</p></th>
        <td mat-cell *matCellDef="let row">{{row.NazivTipIncidenta}}</td>
      </ng-container>
      
      <!-- Prioritet Column -->
      <ng-container matColumnDef="Prioritet" style="z-index: 0;">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Prioritet</p></th>
        <td mat-cell *matCellDef="let row">{{row.Prioritet}}</td>
      </ng-container>
  
      <!-- Potvrdjen Column -->
      <ng-container matColumnDef="Potvrdjen">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Potvrdjen</p></th>
        <td mat-cell *matCellDef="let row">{{row.Potvrdjen}}</td>
      </ng-container>
  
      <!-- Status Column -->
      <ng-container matColumnDef="NazivStatusaIncidenta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Status</p></th>
        <td mat-cell *matCellDef="let row">{{row.NazivStatusaIncidenta}}</td>
      </ng-container>
  
      <!-- ETA Column -->
      <ng-container matColumnDef="ETA">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>ETA</p></th>
        <td mat-cell *matCellDef="let row">{{row.ETA | date}}</td>
      </ng-container>
  
      <!-- ATA Column -->
      <ng-container matColumnDef="ATA">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>ATA</p></th>
        <td mat-cell *matCellDef="let row">{{row.ATA | date}}</td>
      </ng-container>
  
      <!-- ETR Column -->
      <ng-container matColumnDef="ETR">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>ETR</p></th>
        <td mat-cell *matCellDef="let row">{{row.ETR | date}}</td>
      </ng-container>
  
      <!-- Nivo napona Column -->
      <ng-container matColumnDef="NivoNapona">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Nivo napona</p></th>
        <td mat-cell *matCellDef="let row">{{row.NivoNapona | number}} kW</td>
      </ng-container>
  
      <!-- Planirano vreme rada Column -->
      <ng-container matColumnDef="PlaniranoVremeRada">
        <th mat-header-cell *matHeaderCellDef mat-sort-header><p>Planirano vreme rada</p></th>
        <td mat-cell *matCellDef="let row">{{row.PlaniranoVremeRada | date}}</td>
      </ng-container>
  
      <!-- actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell  *matHeaderCellDef > Actions </th>
        <td mat-cell *matCellDef="let row">
          <button mat-button class="btn btn-primary m-1" (click)="preuzmi(row.idIncidenta)">Preuzmi</button>
          <button mat-button class="btn btn-primary m-1" (click)="prikazi(row.idIncidenta)">Prikazi</button>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator #paginator
        [length]="dataSource?.data?.length"
        [pageIndex]="0"
        [pageSize]="10"
        [pageSizeOptions]="[5, 10, 20]">
    </mat-paginator>
  </div>
  <div class="row w-60" [hidden]="idIncidenta == -1">
    <div class="col-6">
      <h1>Tabela opreme za incident {{ idIncidenta }}</h1>
      <table class="table table-striped table-bordered table-sm">
          <thead>
              <th>IdOpreme</th>
              <th>Naziv</th>
              <th>Tip</th>
              <th>Kordinate</th>
              <th>Adresa</th>
              <th>Ukloni</th>
              <th>Lokacija</th>
          </thead>
          <tbody>
              <tr *ngFor="let item of Oprema">
                  <td>{{ item.idOpreme }}</td>
                  <td>{{ item.Naziv }}</td>
                  <td>{{ item.Tip }}</td>
                  <td>{{ item.Kordinate}}</td>
                  <td>{{ item.Adresa}}</td>
                  <td>
                      <input class="btn btn-primary" type="button" (click)="removeOprema(item.idOpreme)" value="Ukloni">
                  </td>
                  <td>
                      <button class="btn btn-primary-outline w-100" >
                          <i class="bi bi-pin-map"></i>
                      </button>
                  </td>
              </tr>
          </tbody>
      </table>
    </div>
    <div class="col-6">
      <div class="col-6">
        <h1>Tabela slika za incident {{ idIncidenta }}</h1>
        <table class="table table-striped table-bordered-table-sm">
          <thead>
            <th>IdSlike</th>
            <th>Putanja</th>
            <th>Prebaci</th>
            <th>Ukloni</th>
          </thead>
          <tbody>
            <tr *ngFor="let slika of Slike">
              <td>{{ slika.idSlike }}</td>
              <td>{{ slika.Putanja }}</td>
              <td>
                <input class="form-control" type="number" [(ngModel)]="idPrebaci">
                <input class="btn btn-primary" type="button" (click)="prebaciSliku(slika.idSlike)" value="Prebaci">
              </td>
              <td>
                <input class="btn btn-primary" type="button" (click)="removeSlika(slika.idSlike)" value="Ukloni">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>